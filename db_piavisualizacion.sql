-- ===============================
-- CREAR BASE DE DATOS
-- ===============================
DROP DATABASE nike_ventas;
CREATE DATABASE nike_ventas;
USE nike_ventas;

-- ===============================
-- TABLAS BASE
-- ===============================

CREATE TABLE tipos_calzado (
    id_tipo_calzado CHAR(1) PRIMARY KEY,
    tipo_calzado VARCHAR(15)
);

CREATE TABLE medidas (
    id_medida CHAR(3) PRIMARY KEY,
    medida VARCHAR(15)
);

CREATE TABLE tipos_local (
    id_tipo_local CHAR(2) PRIMARY KEY,
    tipo_local VARCHAR(10)
);

CREATE TABLE ciudades (
    id_ciudad CHAR(3) PRIMARY KEY,
    ciudad VARCHAR(30),
    estado VARCHAR(30),
    pais VARCHAR(30)
);

-- ===============================
-- TABLAS DE NEGOCIO
-- ===============================
CREATE TABLE estilos (
    id_estilo CHAR(4) PRIMARY KEY,
    estilo VARCHAR(25),
    id_tipo_calzado CHAR(1),
    FOREIGN KEY (id_tipo_calzado) REFERENCES tipos_calzado(id_tipo_calzado)
);
	
CREATE TABLE productos (
    id_estilo CHAR(4),
    id_medida CHAR(3),
    precio_lista DECIMAL(19,4),
    costo_unitario DECIMAL(19,4),
    PRIMARY KEY (id_estilo, id_medida),
    FOREIGN KEY (id_estilo) REFERENCES estilos(id_estilo),
    FOREIGN KEY (id_medida) REFERENCES medidas(id_medida)
);

CREATE TABLE locales (
    id_local INT PRIMARY KEY,
    local VARCHAR(20),
    id_tipo_local CHAR(2),
    id_ciudad CHAR(3),
    FOREIGN KEY (id_tipo_local) REFERENCES tipos_local(id_tipo_local),
    FOREIGN KEY (id_ciudad) REFERENCES ciudades(id_ciudad)
);

-- ===============================
-- TABLA DE INVENTARIO
-- ===============================

CREATE TABLE inventario (
    id_local INT,
    id_estilo CHAR(4),
    id_medida CHAR(3),
    stock INT,
    PRIMARY KEY (id_local, id_estilo, id_medida),
    FOREIGN KEY (id_local) REFERENCES locales(id_local),
    FOREIGN KEY (id_estilo) REFERENCES estilos(id_estilo),
    FOREIGN KEY (id_medida) REFERENCES medidas(id_medida)
);

-- ===============================
-- TABLAS DE VENTAS (SIN INSERTS)
-- ===============================

CREATE TABLE tickets (
    ticket INT PRIMARY KEY,
    fecha_venta DATE,
    id_local INT,
    venta_ticket DECIMAL(19,4),
    FOREIGN KEY (id_local) REFERENCES locales(id_local)
);

CREATE TABLE items (
    ticket INT,
    item INT,
    id_estilo CHAR(4),
    id_medida CHAR(3),
    cantidad INT,
    precio_venta DECIMAL(19,4),
    venta_item DECIMAL(19,4),
    costo_venta DECIMAL(19,4),
    utilidad DECIMAL(19,4),
    PRIMARY KEY (ticket, item),
    FOREIGN KEY (ticket) REFERENCES tickets(ticket),
    FOREIGN KEY (id_estilo) REFERENCES estilos(id_estilo),
    FOREIGN KEY (id_medida) REFERENCES medidas(id_medida)
);

-- ===============================
-- INSERTS (TODO MENOS TICKETS E ITEMS)
-- ===============================

INSERT INTO ciudades (id_ciudad, ciudad, estado, pais) VALUES
('MTY','Monterrey','Nuevo León','México'),
('MEX','CDMX','CDMX','México'),
('GDL','Guadalajara','Jalisco','México'),
('PUE','Puebla','Puebla','México'),
('QRO','Querétaro','Querétaro','México');

INSERT INTO tipos_local (id_tipo_local, tipo_local) VALUES
('PR','Principal'),
('SU','Sucursal');

INSERT INTO locales (id_local, local, id_tipo_local, id_ciudad) VALUES
(1,'NIKE Monterrey','PR','MTY'),
(2,'NIKE CDMX','SU','MEX'),
(3,'NIKE Guadalajara','SU','GDL'),
(4,'NIKE Puebla','SU','PUE'),
(5,'NIKE Querétaro','SU','QRO');

INSERT INTO tipos_calzado (id_tipo_calzado, tipo_calzado) VALUES
('D','DAMA'),
('C','CABALLERO'),
('U','UNISEX'),
('R','RUNNING');

INSERT INTO medidas (id_medida, medida) VALUES
('025','25 MX'),
('026','26 MX'),
('027','27 MX'),
('028','28 MX'),
('029','29 MX');

INSERT INTO productos (id_estilo, id_medida, precio_lista, costo_unitario) VALUES
('E001','025',2199,1400),('E001','026',2199,1400),('E001','027',2199,1400),('E001','028',2199,1400),('E001','029',2199,1400),
('E002','025',2299,1450),('E002','026',2299,1450),('E002','027',2299,1450),('E002','028',2299,1450),('E002','029',2299,1450),
('E003','025',2399,1500),('E003','026',2399,1500),('E003','027',2399,1500),('E003','028',2399,1500),('E003','029',2399,1500),
('E004','025',2499,1550),('E004','026',2499,1550),('E004','027',2499,1550),('E004','028',2499,1550),('E004','029',2499,1550),
('E005','025',2599,1600),('E005','026',2599,1600),('E005','027',2599,1600),('E005','028',2599,1600),('E005','029',2599,1600),

('E006','025',2899,1700),('E006','026',2899,1700),('E006','027',2899,1700),('E006','028',2899,1700),('E006','029',2899,1700),
('E007','025',2999,1800),('E007','026',2999,1800),('E007','027',2999,1800),('E007','028',2999,1800),('E007','029',2999,1800),
('E008','025',3199,1900),('E008','026',3199,1900),('E008','027',3199,1900),('E008','028',3199,1900),('E008','029',3199,1900),
('E009','025',2899,1700),('E009','026',2899,1700),('E009','027',2899,1700),('E009','028',2899,1700),('E009','029',2899,1700),
('E010','025',2699,1600),('E010','026',2699,1600),('E010','027',2699,1600),('E010','028',2699,1600),('E010','029',2699,1600),

('E011','025',2499,1500),('E011','026',2499,1500),('E011','027',2499,1500),('E011','028',2499,1500),('E011','029',2499,1500),
('E012','025',2599,1550),('E012','026',2599,1550),('E012','027',2599,1550),('E012','028',2599,1550),('E012','029',2599,1550),
('E013','025',2699,1600),('E013','026',2699,1600),('E013','027',2699,1600),('E013','028',2699,1600),('E013','029',2699,1600),
('E014','025',2799,1650),('E014','026',2799,1650),('E014','027',2799,1650),('E014','028',2799,1650),('E014','029',2799,1650),
('E015','025',2899,1700),('E015','026',2899,1700),('E015','027',2899,1700),('E015','028',2899,1700),('E015','029',2899,1700),

('E016','025',2999,1800),('E016','026',2999,1800),('E016','027',2999,1800),('E016','028',2999,1800),('E016','029',2999,1800),
('E017','025',3099,1850),('E017','026',3099,1850),('E017','027',3099,1850),('E017','028',3099,1850),('E017','029',3099,1850),
('E018','025',3299,2000),('E018','026',3299,2000),('E018','027',3299,2000),('E018','028',3299,2000),('E018','029',3299,2000),
('E019','025',3399,2100),('E019','026',3399,2100),('E019','027',3399,2100),('E019','028',3399,2100),('E019','029',3399,2100),
('E020','025',2299,1400),('E020','026',2299,1400),('E020','027',2299,1400),('E020','028',2299,1400),('E020','029',2299,1400);


INSERT INTO estilos (id_estilo, estilo, id_tipo_calzado) VALUES
-- DAMA (D)
('E001','Air Max Bella','D'),
('E002','Court Vision Low Mujer','D'),
('E003','Nike Zoom Bella','D'),
('E004','Air Max Dia','D'),
('E005','Nike Venture Runner Mujer','D'),

-- CABALLERO (C)
('E006','Air Max 90','C'),
('E007','Air Force 1','C'),
('E008','Nike Blazer Mid','C'),
('E009','Air Max Impact','C'),
('E010','Nike Court Legacy','C'),

-- UNISEX (U)
('E011','Nike Waffle One','U'),
('E012','Air Max 2090','U'),
('E013','Nike Air Rift','U'),
('E014','Nike Gamma Force','U'),
('E015','Nike Cortez','U'),

-- RUNNER (R)
('E016','Nike Pegasus 40','R'),
('E017','Nike Infinity Run 3','R'),
('E018','Nike Zoom Fly 5','R'),
('E019','Nike Vomero 17','R'),
('E020','Nike Downshifter 12','R');


-- ===============================
-- INVENTARIO POR SUCURSAL
-- ===============================
-- Sucursal de monterrey 
INSERT INTO inventario VALUES
(1,'E001','025',20),(1,'E001','026',18),(1,'E001','027',22),(1,'E001','028',16),(1,'E001','029',14),
(1,'E002','025',12),(1,'E002','026',15),(1,'E002','027',17),(1,'E002','028',14),(1,'E002','029',13),
(1,'E003','025',19),(1,'E003','026',20),(1,'E003','027',16),(1,'E003','028',18),(1,'E003','029',15),
(1,'E004','025',10),(1,'E004','026',12),(1,'E004','027',13),(1,'E004','028',11),(1,'E004','029',9),
(1,'E005','025',21),(1,'E005','026',19),(1,'E005','027',18),(1,'E005','028',17),(1,'E005','029',16),

(1,'E006','025',22),(1,'E006','026',20),(1,'E006','027',18),(1,'E006','028',19),(1,'E006','029',17),
(1,'E007','025',14),(1,'E007','026',16),(1,'E007','027',15),(1,'E007','028',13),(1,'E007','029',12),
(1,'E008','025',18),(1,'E008','026',21),(1,'E008','027',19),(1,'E008','028',17),(1,'E008','029',16),
(1,'E009','025',11),(1,'E009','026',13),(1,'E009','027',14),(1,'E009','028',12),(1,'E009','029',10),
(1,'E010','025',20),(1,'E010','026',22),(1,'E010','027',21),(1,'E010','028',19),(1,'E010','029',18);

-- Sucursal de Cdmx
INSERT INTO inventario VALUES
(2,'E011','025',11),(2,'E011','026',12),(2,'E011','027',10),(2,'E011','028',14),(2,'E011','029',13),
(2,'E012','025',9),(2,'E012','026',10),(2,'E012','027',11),(2,'E012','028',9),(2,'E012','029',8),
(2,'E013','025',17),(2,'E013','026',16),(2,'E013','027',15),(2,'E013','028',13),(2,'E013','029',14),
(2,'E014','025',6),(2,'E014','026',5),(2,'E014','027',7),(2,'E014','028',8),(2,'E014','029',6);

-- Sucursal  de Guadalajara 
INSERT INTO inventario VALUES
(3,'E015','025',13),(3,'E015','026',12),(3,'E015','027',11),(3,'E015','028',10),(3,'E015','029',9),
(3,'E016','025',16),(3,'E016','026',15),(3,'E016','027',14),(3,'E016','028',13),(3,'E016','029',12),
(3,'E017','025',19),(3,'E017','026',17),(3,'E017','027',16),(3,'E017','028',15),(3,'E017','029',14),
(3,'E018','025',9),(3,'E018','026',8),(3,'E018','027',7),(3,'E018','028',6),(3,'E018','029',5);

-- Sucursal de Puebla
INSERT INTO inventario VALUES
(4,'E019','025',10),(4,'E019','026',9),(4,'E019','027',8),(4,'E019','028',7),(4,'E019','029',6),
(4,'E020','025',11),(4,'E020','026',12),(4,'E020','027',10),(4,'E020','028',11),(4,'E020','029',9),
(4,'E001','025',13),(4,'E001','026',14),(4,'E001','027',12),(4,'E001','028',11),(4,'E001','029',10),
(4,'E002','025',5),(4,'E002','026',6),(4,'E002','027',7),(4,'E002','028',6),(4,'E002','029',4);

-- Sucursal de Queretaro 
INSERT INTO inventario VALUES
(5,'E003','025',14),(5,'E003','026',13),(5,'E003','027',12),(5,'E003','028',11),(5,'E003','029',10),
(5,'E004','025',12),(5,'E004','026',11),(5,'E004','027',13),(5,'E004','028',10),(5,'E004','029',9),
(5,'E005','025',15),(5,'E005','026',14),(5,'E005','027',13),(5,'E005','028',12),(5,'E005','029',11),
(5,'E006','025',7),(5,'E006','026',8),(5,'E006','027',6),(5,'E006','028',7),(5,'E006','029',5);

-- Inserts de Tickets 
INSERT INTO tickets VALUES
(1001,'2024-06-12',1,2899),
(1002,'2024-06-25',1,2399),
(1003,'2024-07-03',1,2999),
(1004,'2024-07-28',1,2299),
(1005,'2024-08-10',1,2499),
(1006,'2024-08-29',1,3399),
(1007,'2024-09-14',1,3099),
(1008,'2024-10-02',1,2799),
(1009,'2024-11-18',1,2599),
(1010,'2024-12-05',1,3299),

(1011,'2024-06-22',2,2499),
(1012,'2024-07-15',2,2799),
(1013,'2024-08-04',2,2299),
(1014,'2024-09-19',2,2599),
(1015,'2024-10-27',2,2899),

(1016,'2024-07-11',3,2999),
(1017,'2024-08-21',3,2699),
(1018,'2024-09-07',3,2899),
(1019,'2024-10-13',3,2599),
(1020,'2024-12-02',3,3099),

(1021,'2024-07-29',4,2199),
(1022,'2024-09-01',4,2499),
(1023,'2024-10-25',4,2399),
(1024,'2024-12-17',4,2699),
(1025,'2025-01-14',4,2799),

(1026,'2024-08-09',5,2899),
(1027,'2024-09-28',5,2599),
(1028,'2024-11-06',5,2299),
(1029,'2025-01-03',5,2499),
(1030,'2025-02-22',5,2699);

-- Items de cuantos productos totales se vendieron 
-- ITEMS – Sucursal Monterrey tickets 1001–1010
INSERT INTO items VALUES
(1001,1,'E006','025',1,2899,2899,1700,1199),
(1002,1,'E003','025',1,2399,2399,1500,899),
(1003,1,'E007','027',1,2999,2999,1800,1199),
(1004,1,'E002','026',1,2299,2299,1450,849),
(1005,1,'E004','027',1,2499,2499,1550,949),
(1006,1,'E019','027',1,3399,3399,2100,1299),
(1007,1,'E017','026',1,3099,3099,1850,1249),
(1008,1,'E014','025',1,2799,2799,1650,1149),
(1009,1,'E005','028',1,2599,2599,1600,999),
(1010,1,'E018','029',1,3299,3299,2000,1299);

-- ITEMS – Sucursal CDMX tickets 1011–1015
INSERT INTO items VALUES
(1011,1,'E011','025',1,2499,2499,1500,999),
(1012,1,'E014','026',1,2799,2799,1650,1149),
(1013,1,'E001','028',1,2199,2199,1400,799),
(1014,1,'E012','027',1,2599,2599,1550,1049),
(1015,1,'E015','025',1,2899,2899,1700,1199);

-- ITEMS – Sucursal Guadalajara tickets 1016–1020
INSERT INTO items VALUES
(1016,1,'E007','028',1,2999,2999,1800,1199),
(1017,1,'E010','027',1,2699,2699,1600,1099),
(1018,1,'E015','029',1,2899,2899,1700,1199),
(1019,1,'E003','026',1,2399,2399,1500,899),
(1020,1,'E017','025',1,3099,3099,1850,1249);

-- ITEMS – Sucursal Puebla tickets 1021–1025
INSERT INTO items VALUES
(1021,1,'E001','025',1,2199,2199,1400,799),
(1022,1,'E004','026',1,2499,2499,1550,949),
(1023,1,'E003','029',1,2399,2399,1500,899),
(1024,1,'E014','028',1,2799,2799,1650,1149),
(1025,1,'E018','026',1,3299,3299,2000,1299);

-- ITEMS – Sucursal Querétaro tickets 1026–1030
INSERT INTO items VALUES
(1026,1,'E006','027',1,2899,2899,1700,1199),
(1027,1,'E010','028',1,2699,2699,1600,1099),
(1028,1,'E001','026',1,2199,2199,1400,799),
(1029,1,'E012','025',1,2599,2599,1550,1049),
(1030,1,'E013','027',1,2699,2699,1600,1099);

SELECT * FROM inventario;

SELECT * FROM items;

SELECT * FROM tickets;

SELECT * FROM productos;

SELECT * FROM estilos;

SELECT * FROM medidas;


SELECT * FROM tipos_calzado;

SELECT * FROM locales;

SELECT * FROM ciudades;

SELECT * FROM tipos_local;

